<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cuttle V2</title>
</head>
<body>
    <div ng-app="app" class="wrappingDiv">
        <!-- Highest level controller -->
        <div id="menuController" ng-controller="menuController as menu" ng-cloak class="wrappingDiv">
            <!-- Sign Up/Login Tab Buttons -->
            <div id="buttonWrapper" class="btn-group">
                <button ng-click="menu.tab='signup'" class="btn btn-default">Sign Up</button>
                <button ng-click="menu.tab='login'" class="btn btn-default">Log In</button>
                <button ng-click="menu.requestGames()" class="btn btn-default">Games</button>
            </div>
            <!-- Displays either signup, or login form -->
            <div id="formWrapper">
                <!-- Sign up form -->
                <div ng-controller="signUpController as signup">
                    <form ng-if="menu.tab==='signup'" name="signupForm" novalidate ng-submit="signupForm.$valid && signup.submitSignUp()" class="container-fluid">
                        <div class="row">
                            <p class="col-xs-2 col-xs-offset-5">Sign Up</p>
                        </div>
                        <div class="row">
                            <p class="col-xs-offset-2 col-xs-2">Email</p>
                            <input ng-model="signup.email" type="text" class="col-xs-4" required>
                        </div>
                        <div class="row">
                            <p class="col-xs-offset-2 col-xs-2">Password</p>
                            <input ng-model="signup.password" type="text" class="col-xs-4" required>
                        </div>
                        <div class="row">
                            <p class="col-xs-offset-2 col-xs-2">Repeat Password</p>
                            <input ng-model="signup.repeatPassword" type="text" class="col-xs-4" required>
                        </div>
                        <div class="row">
                            <input class="button button-lg col-xs-offset-5" type="submit"></input>
                        </div>
                    </form> <!-- End of signup form -->
                </div> <!-- End signup controller -->

                <div ng-controller="loginController as login">
                    <!-- Log in form -->
                    <form ng-show="menu.tab==='login'" class="container-fluid">
                        <div class="row">
                            <p class="col-xs-2 col-xs-offset-5">Log In</p>
                        </div>
                        <div class="row">
                            <p class="col-xs-2 col-xs-offset-2">Email</p>
                            <input ng-model="login.email" class="col-xs-4" type="text">
                        </div>
                        <div class="row">
                            <p class="col-xs-2 col-xs-offset-2">Password</p>
                            <input ng-model="login.password" class="col-xs-4" type="text">
                        </div>
                        <div class="row">
                            <button ng-click="login.submitLogin()" class="button button-lg col-xs-offset-5">Log In</button>
                        </div>
                    </form> <!-- End of login form -->
                </div> <!-- End login controller -->

                <div ng-controller="gamesOverviewController as gamesOverview">
                    <div ng-show="menu.tab==='gamesOverview'" class="table table-striped">
                        <form ng-submit="gamesOverview.createGame()">
                            <h1>Game Name</h1>
                            <input ng-model="gamesOverview.gameName" type="text" placeholder="Create Game">
                            <input type="submit">
                        </form>
                        <table>
                            <th>#</th>
                            <th>Game Name</th>
                            <th>Open</th>
                            <th>Join</th>
                                <tr ng-repeat="game in menu.games track by $index">
                                    <td>{{$index}}</td>
                                    <td>{{game.name}}</td>
                                    <td>{{game.status}}</td>
                                    <td>
                                        <button ng-if="game.status===true" class="btn btn-default" ng-click="gamesOverview.joinGame($index)">Join</button >
                                        <button ng-if="game.status===false" class="btn btn-default" disabled="disabled">Full</button>
                                    </td>
                                </tr>
                        </table>
                    </div>
                </div>


            </div> <!-- End of formWrapper -->
            <div ng-controller="lobbyController as lobby">
                <div ng-show="menu.tab==='lobby'">
                    <p>
                        Welcome to the lobby of (Game name here possibly).  When you are ready, hit the <button ng-click="lobby.ready()">Ready</button> button.  If you wish to review any of the rules, click on the any off the buttons below.
                    </p>

                    <h2>One Offs</h2>
                   <!-- <table>         
                        <tr>
                            <td>
                                <button ng-click="lobby.aceRules()">Ace</button>
                                <div ng-show="lobby.displayAce">
                                    <button ng-click="lobby.startAce()">Start</button>
                                    <div ng-show="lobby.aceClicked" class="fading-test">Testing</div>
                                </div>
                            </td>
                            <td><button>Two</button></td>
                            <td><button>Three</button></td>
                            <td><button>Four</button></td>
                        </tr>
                        <tr>
                            <td><button>Five</button></td>
                            <td><button>Six</button></td>
                            <td><button>Seven</button></td>
                            <td><button>Nine</button></td>
                        </tr>
                    </table> End of One Offs table
                    <h2>Runes</h2>
                    <table>
                        <tr>
                            <td><button>Eight</button></td>
                            <td><button>Jack</button></td>
                            <td><button>Queen</button></td>
                            <td><button>King</button></td>
                        </tr>
                    </table> End of Runes table -->

                    <div ng-init="checked = false">
                        <label>
                            <input type="checkbox" ng-model="checked">
                            Ace Rules
                        </label>
                        <div class="sample-show-hide" ng-show="checked">
                            <img class="transition_1 lobbyCard" src='/images/cards/card_0_9.png'>
                            <div>
                                Click on the ace to activate your trap card
                                <img src="/images/cards/ace_of_spades2.png" ng-click="cardCheck = !cardCheck" ng-init="cardCheck = true">
                                <div class="sevenTest-hide" ng-show="cardCheck">
                                    <img class="transition_2 lobbyCard" src='/images/cards/card_2_7.png'>
                                    <img class="transition_3 lobbyCard" src='/images/cards/card_2_4.png'>
                                </div>
                            </div>
                        </div>
                    </div>


                    <h2>Scuttling</h2>
                </div> <!-- End of lobby contorller -->
            </div> <!-- End of ng-show for lobby-->

            <!-- Game View -->
            <div ng-controller="gamesController as gc" class="container-fluid gameDiv">
                <div ng-show="menu.tab==='gameView'" class="gameDiv">
                    <div id="bg">
                        <!-- TEST DRAW ACTION -->
                        <!-- Top Wrap -->
                        <div id = "topWrap" class = "row">
                            <div id="oppHand">
                                <!-- Opponent's hand CARDBACKS -->
                                <div ng-repeat="card in gc.opponent.hand" ng-show="!gc.glasses" class="opHandCard">
                                    <img src="images/deck.jpg" class="opHandCardImg">
                                </div>
                                <!-- Oponent's hand REVEALED -->
                                <div ng-repeat="card in gc.opponent.hand" ng-show="gc.glasses" class="opHandCard">
                                    <img ng-src="{{card.img}}" class="opHandCardImg">
                                </div>
                            </div>
                            <p id="oppWinCon">
                                <!-- angular view of wincondition -->
                            </p>
                            <div id="oppCounter">
                                <div id="oppKingSlot1" class="kingSlot" ng-class="{fullKing: gc.opKingCount >= 1}">
                                    <p class="cap1">14</p>
                                </div>
                                <div id="oppKingSlot2" class="kingSlot" ng-class="{fullKing: gc.opKingCount >= 2}">
                                    <p class="cap2">10</p>
                                </div>
                                <div>
                                    <div id="oppPointTotal" class="pointTotal">
                                        <div>
                                            {{gc.opPointCount}}
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div id="oppKingSlot3" class="kingSlot" ng-class="{fullKing: gc.opKingCount >= 3}">
                                        <p class="cap3">7</p>
                                    </div>
                                    <div id="oppKingSlot4" class="kingSlot" ng-class="{fullKing: gc.opKingCount >= 4}">
                                        <p class="cap4">5</p>
                                    </div>
                                </div>
                                <!-- Put king squares -->
                            </div>
                        </div> <!-- End of topWrap -->
                        <!-- Middle Wrap -->
                        <div id="midWrap" class="row">
                            <div class="col-xs-2 col-md-2" id="deckScrapStack">
                                <!-- Deck and Scrap -->
                                <img src="images/deck.jpg" id="deck" ng-click="gc.draw()"></img>
                                <img src="images/scrap.jpg" id="scrap" ts-droppable allow-drop="gc.dragoverScrap" index="0" upon-drop="gc.dropScrap"></img>
<!--                                 <div id="stack">Stack</div> -->
                            </div>
                            <div class="col-xs-4 col-md-4 field row" id='points'>
                                <div id="oppPoints">
                                    <div ng-repeat="card in gc.opponent.points" class="pointCard">
                                        <img ng-src="{{card.img}}" class="pointCardImg" ts-droppable allow-drop="gc.dragoverOpPoint" upon-drop="gc.dropOpPoint" index="$index">
                                        <div ng-repeat="jack in card.attachments" class="jackCard">
                                            <img ng-src="{{jack.img}}" id="oppJackCardImg">
                                        </div>
                                    </div>
                                </div>

                                <div id="yourPoints" ts-droppable allow-drop="gc.dragoverPoints" index="0" upon-drop="gc.dropPoints">
                                    <div ng-repeat="card in gc.player.points" class="pointCard">
                                        <img ng-src="{{card.img}}" class="pointCardImg">
                                        <div ng-repeat="jack in card.attachments" class="jackCard">
                                            <img ng-src="{{jack.img}}" id="jackCardImg">
                                        </div>
                                    </div>
<!--                                     <div ng-repeat="jack in gc.player.points.attachments" class="jackCard">
                                        <img ng-src="{{jack.img}}" class="jackCardImg">
                                    </div> -->

                                </div>
                            </div>
                            <div class="col-xs-4 col-md-4 field row" id="runes">
                                <!-- Runes -->
                                <div id="oppRunes">
                                    <!-- Opponent Runes -->
                                    <div ng-repeat="card in gc.opponent.runes" class="runeCard">
                                        <img ng-src="{{card.img}}" class="runeCardImg" ts-droppable allow-drop="gc.dragoverOpPoint" upon-drop="gc.dropOpPoint" index="0">
                                    </div>
                                </div>
                                <div id="yourRunes" ts-droppable allow-drop="gc.dragoverRunes" index="0" upon-drop="gc.dropRunes">
                                    <div ng-repeat="card in gc.player.runes" class="runeCard">
                                        <img ng-src="{{card.img}}" class="runeCardImg">
                                    </div>
                                    <!-- Your Runes -->
                                </div>
                            </div>
                            <div class="col-xs-2 col-md-2" id="gameLog">
                                <div ng-repeat="text in gc.game.log">
                                    {{text}}
                                </div>
                                <!-- gameLog -->
                            </div>
                        </div> <!-- End of middle wrap -->
                        <!-- Bottom Wrap -->
                        <div id="bottomWrap" class="row">
                            <div id="yourHand">
                                <!-- Your Hand -->
                                <div ng-repeat="card in gc.player.hand" class="handCard">
                                    <img ng-src="{{card.img}}" ts-draggable index="$index" class="handCardImg" card-id="card.id" type="'hand'" suit="card.suit" rank="card.rank" ng-click="gc.clickHandCard($index)" ng-class="{discarding: gc.cardsToDiscard.indexOf(gc.player.hand[$index]) > -1}">
                                    {{card.rank}} of {{card.suit}}
                                </div>
                            </div>
                            <p id="winCon">
                                <!-- Win Condition -->
                            </p>
                            <div id="yourCounter">
                                <div id="yourKingSlot1" class="kingSlot" ng-class="{fullKing: gc.yourKingCount >= 1}">
                                    <p class="cap1">14</p>
                                </div>
                                <div id="yourKingSlot2" class="kingSlot" ng-class="{fullKing: gc.yourKingCount >= 2}">
                                    <p class="cap2">10</p>
                                </div>
                                <div>
                                    <div id="yourPointTotal" class="pointTotal">
                                        <div>
                                            <p>{{gc.yourPointCount}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div id="yourKingSlot3" class="kingSlot" ng-class="{fullKing: gc.yourKingCount >= 3}">
                                        <p class="cap3">7</p>
                                    </div>
                                    <div id="yourKingSlot4" class="kingSlot" ng-class="{fullKing: gc.yourKingCount >= 4}">
                                        <p class="cap4">5</p>
                                    </div>
                                </div>
                                <!-- Your king squares -->
                            </div>
                            <!-- DEVELOPMENT ONLY - REMOVE IN PRODUCTION -->
                            <button ng-click="gc.showDeck = !gc.showDeck" id="toggleDeck">Toggle Deck</button>
                            <div ng-show="gc.showDeck" id="shownDeck">
                                <img ng-repeat="card in gc.game.deck" ng-src="{{card.img}}" class="shownDeckCard" ng-click="gc.stackDeck(gc.game.deck[$index].id)">
                            </div>
                        </div> <!-- End of bottom wrap -->
                    </div>
                </div> <!-- End of ng-show for game -->
            </div> <!-- End of game controller -->

        </div> <!-- End of menuController -->
    </div><!-- End of app -->
</div><!-- End of body -->
</html>
